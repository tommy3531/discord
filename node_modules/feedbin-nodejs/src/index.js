const axios = require('axios');

const Authentication = require('./authentication');
const Subscriptions = require('./subscriptions');

const FEEDBIN_HOST = 'https://api.feedbin.com'

class Feedbin {
	constructor (username, password, feedbinHost = FEEDBIN_HOST) {
		let credentials = {
			username,
			password
		};

		let httpClient = axios.create({
			baseURL: feedbinHost,
			auth: credentials
		});

		httpClient.interceptors.response.use(function (response) {
			console.log(response.status, response.data);
			return Promise.resolve(response.data);
		}, function (err) {
			return Promise.reject(err);
		});

		this.authentication = new Authentication(httpClient);
		this.subscriptions = new Subscriptions(httpClient);
	}
}

module.exports = Feedbin;
